{"version":3,"sources":["../src/server.js"],"names":["app","use","json","genid","req","genuuid","resave","saveUninitialized","secret","cookie","secure","s4","Math","floor","random","toString","substring","set","static","join","__dirname","listen","process","env","PORT"],"mappings":";;AAAA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;AACA,IAAMA,MAAM,wBAAZ;;AAEAA,IAAIC,GAAJ,CAAQ,qBAAWC,IAAX,EAAR;;AAGAF,IAAIC,GAAJ,CAAQ,8BAAQ;AACdE,SAAO,eAASC,GAAT,EAAc;AACnB,WAAOC,SAAP,CADmB,CACF;AAClB,GAHa;AAIdC,UAAQ,IAJM;AAKdC,qBAAmB,IALL;AAMdC,UAAQ,YANM;AAOdC,UAAQ,EAAEC,QAAQ,KAAV;AAPM,CAAR,CAAR;;AAUA,IAAML,UAAU,SAAVA,OAAU,GAAM;AACpB,WAASM,EAAT,GAAc;AACd,WAAOC,KAAKC,KAAL,CAAW,CAAC,IAAID,KAAKE,MAAL,EAAL,IAAsB,OAAjC,EACJC,QADI,CACK,EADL,EAEJC,SAFI,CAEM,CAFN,CAAP;AAGD;AACD,SAAOL,OAAOA,IAAP,GAAc,GAAd,GAAoBA,IAApB,GAA2B,GAA3B,GAAiCA,IAAjC,GAAwC,GAAxC,GACLA,IADK,GACE,GADF,GACQA,IADR,GACeA,IADf,GACsBA,IAD7B;AAEC,CARD;;AAUAX,IAAIiB,GAAJ,CAAQ,aAAR,EAAuB,CAAvB,E,CAA0B;;;AAG1BjB,IAAIC,GAAJ,CAAQ,GAAR;AACA;AACAD,IAAIC,GAAJ,CAAQ,kBAAQiB,MAAR,CAAe,eAAKC,IAAL,CAAUC,SAAV,EAAqB,UAArB,CAAf,CAAR;;AAEApB,IAAIqB,MAAJ,CAAWC,QAAQC,GAAR,CAAYC,IAAZ,IAAoB,IAA/B","file":"server.js","sourcesContent":["import express from 'express';\nimport session from'express-session';\nimport bodyParser from 'body-parser';\nimport path from 'path';\nimport routes from './routes'\nconst app = express();\n\napp.use(bodyParser.json())\n\n\napp.use(session({\n  genid: function(req) {\n    return genuuid() // use UUIDs for session IDs\n  },\n  resave: true,\n  saveUninitialized: true,\n  secret: 'the secret',\n  cookie: { secure: false }\n}))\n\nconst genuuid = () => {\n  function s4() {\n  return Math.floor((1 + Math.random()) * 0x10000)\n    .toString(16)\n    .substring(1);\n}\nreturn s4() + s4() + '-' + s4() + '-' + s4() + '-' +\n  s4() + '-' + s4() + s4() + s4();\n}\n\napp.set('trust proxy', 1) // trust first proxy\n\n\napp.use('/', routes)\n// TODO: client path should be handled by nginx rather than express ....\napp.use(express.static(path.join(__dirname, './client')));\n\napp.listen(process.env.PORT || 3000);\n"]}